<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="Day.js"></script>
    <script src="Note.js"></script>
    <script>

//        test1("update use 1");
//        test2("update use 2");
//        test3("update multiple");
//        test4("different notes in each");
//        test0("both the same");
test5("deleted merging");
test6();

        function test0(name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"abc",1],
                    ]);
            var d2 =Day.createTestDay(
                    [
                        [1,"abc",1]
                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,abc,1],");
        }

        function test1(name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"abc",1]
                    ]);
            var d2 =Day.createTestDay(
                    [
                        [1,"ABC",2]
                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,ABC,2],");
        }

        function test2(name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"abc",3]
                    ]);
            var d2 =Day.createTestDay(
                    [
                        [1,"ABC",2]
                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,abc,3],");
        }


        function test3(name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"a",1],
                        [2, "bb", 2]
                    ]);
            var d2 =Day.createTestDay(
                    [
                        [1,"aa",2],
                        [2,"b",1]

                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,aa,2],[2,bb,2],");
        }

        function test4 (name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"a",1],

                    ]);
            var d2 =Day.createTestDay(
                    [

                        [2,"b",1]

                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,a,1],[2,b,1],");
        }


        function test5 (name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"a",1],
                        [3,"b",1],
                        [5,"c",1],
                        [2,"*deleted*",1],
                        [4,"*deleted*",1],

                    ]);
            var d2 =Day.createTestDay(
                    [

                        [3,"*deleted*",2],
                        [2,"d",1],
                        [4,"e",1],

                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,a,1],[5,c,1],");
        }

        function test6 (name)
        {
            var d1 =Day.createTestDay(
                    [
                        [1,"a",1],
                        [3,"b",1],
                        [5,"c",1],
                        [2,"*deleted*",1],
                        [4,"*deleted*",1],

                    ]);
            var d2 =Day.createTestDay(
                    [

                        [3,"*deleted*",2],
                        [2,"d",1],
                        [4,"e",1],

                    ]);

            var merged = Day.merge(d1, d2);
            compare(name, merged,"[1,a,1],[5,c,1],");
            if (merged._deletedNotes["2"]===undefined || merged._deletedNotes["3"]===undefined || merged._deletedNotes["4"]===undefined )
            {
                console.log("FAILED! expected length 3, was "+merged._deletedNotes.length);
            }
        }

        function compare(name, merged,expectedToString)
        {
            if (merged.toString()!== expectedToString)
            {
                console.error(name + " FAILED!");
                console.error("was: " + merged.toString() + " expected: " + expectedToString);
            }
            else
            {
                console.log(name + " PASSED!");
            }
        }

    </script>

</head>
<body>

</body>
</html>